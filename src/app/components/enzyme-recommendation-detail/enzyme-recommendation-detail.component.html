<div class="flex flex-col gap-4 max-w-content-xl w-full px-4">
  <div class="flex items-center justify-between pt-10">
    <div class="flex gap-2 items-center">
      <button type="button" title="Back to All Results"
        class="border border-solid border-[#DEE2E6] rounded-sm px-2 py-1 flex items-center gap-2 bg-[#f8f9fa]"
        (click)="backToSearch()">
        <i class="pi pi-arrow-left"></i>
        <span>Back to All Results</span>
      </button>
      @switch (algorithm) {
        @case ('mcs') {
          <h5 class="font-bold mt-0">MCS Results</h5>
        }
        @case ('fragment') {
          <h5 class="font-bold mt-0">Fragment Algorithm Results</h5>
        }
        @case ('tanimoto') {
          <h5 class="font-bold mt-0">Tanimoto Similarity Results</h5>
        }
      }
      <button
        type="button"
        title="copy job id"
        class="border-none cursor-pointer"
      >
        <i class="pi pi-link" (click)="copyAndPasteURL()"></i>
      </button>
    </div>
    <div class="flex items-center gap-2">

      <div id="btn-export" class="flex flex-col justify-center">
        <p-button label="Export" icon="pi pi-download" (onClick)="menu.toggle($event)"></p-button>
        <p-tieredMenu #menu [model]="exportOptions" [popup]="true" />
      </div>
    </div>
  </div>

  <p-panel>
    <ng-template pTemplate="header">
      <span class="grow">Input Substrate</span>
    </ng-template>

    @if (substrate) {
    <div class="flex gap-2 p-2">
      <div class="flex flex-col gap-2 w-1/3 p-2">
        <app-molecule-image #molecule2d
          class="w-full h-full rounded-md border border-solid border-[#DEE2E6] p-2 flex items-center justify-center"
          [smiles]="substrate['smiles']" [width]="200" [height]="200"></app-molecule-image>
      </div>
      <div class="flex flex-col gap-4 w-2/3 border-l border-solid border-[#DEE2E6] p-2">
        <div class="flex flex-col gap-4">
          <div class="flex justify-between">
            <span class="leading-sm text-[#495057]">Name</span>
            <span class="font-semibold text-end leading-base inline-block max-w-[200px] break-words">{{
              substrate['iupac_name'] }}</span>
          </div>
          <div class="flex justify-between">
            <span class="leading-sm text-[#495057]">SMILES</span>
            <span class="font-semibold text-end leading-base inline-block max-w-[200px] break-words">{{
              substrate['smiles'] }}</span>
          </div>
          <div class="flex justify-between">
            <span class="leading-sm text-[#495057]">Matches Returned</span>
            <span class="font-semibold text-end leading-base inline-block max-w-[200px] break-words">{{
              substrate['matches_return'] }}</span>
          </div>
          <hr>
          @switch (algorithm) {
            @case ('mcs') {
              <div>
                <div>
                  <div class="leading-xl">What is 
                    <span class="p-1 text-white font-semibold rounded-md bg-[#726EDE]">MCS Score</span>?
                  </div>
                  <div class="leading-xl italic mt-2">
                    Maximum Common Substructure Score is a numerical value ranging from 0 to 1 representing the size of the largest shared substructure between two molecules, with higher scores indicating greater structural overlap. The top 10 matches for the input substrate are shown below.
                  </div>
                </div>
              </div>
            }
            @case ('tanimoto') {
              <div>
                <div class="leading-xl">What is
                  <span class="p-1 text-black font-semibold rounded-md bg-[#B2FDEF]">Tanimoto Score</span>?
                </div>
                <div class="leading-xl italic mt-2">
                  Tanimoto Similarity Score is a metric ranging from 0 to 1 that quantifies the similarity between two molecular fingerprints, where 1 indicates identical structures. The top 10 matches for the input substrate are shown below.
                </div>
              </div>
            }
            @case ('fragment') {
              <div>
                <div class="leading-xl">What results are returned?</div>
                <div class="leading-xl italic mt-2">
                  All substrates with matching fragments are returned. Matches are listed from largest to smallest fragment.
                </div>
              </div>
            }
          }
        </div>
      </div>
    </div>
    }
  </p-panel>

  <!-- Request Configuration -->
  <app-kinetic-table #kineticTable [result]="result" [filters]="filters"></app-kinetic-table>
</div>